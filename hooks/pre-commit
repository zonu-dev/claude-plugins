#!/usr/bin/env bash
set -euo pipefail

ALLOWED_NAME="zonu-dev"
ALLOWED_EMAIL="zonu.develop@gmail.com"

AUTHOR_NAME="$(git config user.name)"
AUTHOR_EMAIL="$(git config user.email)"

if [ "$AUTHOR_NAME" != "$ALLOWED_NAME" ] || [ "$AUTHOR_EMAIL" != "$ALLOWED_EMAIL" ]; then
  echo "ERROR: コミットがブロックされました"
  echo "  現在: $AUTHOR_NAME <$AUTHOR_EMAIL>"
  echo "  許可: $ALLOWED_NAME <$ALLOWED_EMAIL>"
  echo ""
  echo "修正するには:"
  echo "  git config user.name \"$ALLOWED_NAME\""
  echo "  git config user.email \"$ALLOWED_EMAIL\""
  exit 1
fi
