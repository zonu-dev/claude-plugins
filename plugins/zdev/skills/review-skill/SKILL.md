---
name: review-skill
description: Claude Codeスキルを公式ベストプラクティスに基づいてレビューする。SKILL.mdファイルのレビュー、スキル品質のチェック、スキル構造の検証、改善提案を行う。「このスキルをレビューして」「スキル品質をチェック」「SKILL.mdを検証」「このスキルを改善」などのリクエストで起動する。
---

# スキルレビュー

公式ベストプラクティスに基づいてスキルをレビューし、具体的な改善提案を行う。

## レビューワークフロー

### ステップ1: 対象スキルの特定

レビュー対象のSKILL.mdファイルを特定する：
- ユーザーがパスを直接指定
- カレントディレクトリでSKILL.mdを検索
- 複数のスキルが存在する場合はディレクトリ名を列挙してユーザーに確認

### ステップ2: 読み込みと分析

1. 対象のSKILL.mdファイルを完全に読み込む
2. [best-practices.md](references/best-practices.md) でチェックリストを確認
3. YAMLフロントマター（name, description）を解析
4. ボディコンテンツの構造を分析

### ステップ3: ベストプラクティスとの照合

各カテゴリを評価：

**フロントマターチェック**
- name: 存在すること（必須）、長さ、形式、命名規則
- description: 完全性、具体性、日本語であること、三人称記述
- description（`disable-model-invocation: false` の場合のみ）: トリガーワード、使用シナリオの記載
- disable-model-invocation: 副作用のあるスキル（commit, deploy等）に `true` が設定されているか
- user-invocable: 適切に設定されているか

**ボディチェック**
- 行数（目標: 500行以下）
- 構造の明確さ
- Progressive Disclosureの使用
- ワークフロー設計の品質

**参照ファイル整合性チェック**
- SKILL.md内のリンク（`[text](path)` 形式）が指す参照ファイルが全て実際に存在するか
- references/ 配下にファイルが存在するのにSKILL.mdからリンクされていない孤立ファイルがないか
- SKILL.md本文で参照ファイルの内容について言及している記述が、参照ファイルの実際の内容と一致しているか（例: 「チェックリストを確認」と書いてあるのに参照先がチェックリスト形式でない等）
- scripts/ 配下のスクリプトがSKILL.mdのワークフローで参照されているか
- **クロススキル参照の検出**: SKILL.mdのリンクや本文に `../`パスで別スキルの `references/` や `scripts/` を直接参照していないか。Agent Skills仕様ではSKILL.mdからの参照は1階層以内に留める必要があり、別スキルのファイルを参照する場合は自スキルの `references/` に symlink を作成して `references/<file>` として参照する

**言語チェック**
- SKILL.mdのdescriptionが日本語であるか（Warning）
- SKILL.mdのボディが日本語であるか（Critical）

**コンテンツチェック**
- 用語の一貫性
- 例の品質
- テンプレートの適切さ

**ワークフローチェック**
- バリデーションステップの有無（実行→検証→修正→繰り返し）
- フィードバックループの設計
- ユーザーヒアリングの形式（1つずつ順番に質問しているか）

**スクリプトチェック**（scripts/ が存在する場合）
- エラー処理の有無
- マジック定数の使用
- プラットフォーム制限の明記
- ファイルパス形式（フォワードスラッシュ使用）

**MCPツールチェック**（MCPツールを使用している場合）
- 完全修飾ツール名の使用（`ServerName:tool_name`）

**アンチパターン検出**
- デフォルトなしの複数選択肢
- Windowsスタイルのパス
- 時間に依存する情報
- マジック定数

### ステップ4: レビューレポート生成

**重大度の判定ルール**:
- 各 finding は重大度分類の定義に**厳密に**照合して分類する
- 判定基準の閾値を満たさない場合は**下位の重大度**に分類する（「閾値未満だが…」で Warning にしない）
- 一度レポートに記載した重大度は修正フェーズで変更しない。判定に迷ったら報告前に確定させる

出力形式：

```markdown
# スキルレビューレポート: {skill-name}

## サマリー
- 総合評価: {PASS | NEEDS_IMPROVEMENT | CRITICAL_ISSUES}
- Critical: {件数}
- Warning: {件数}
- Info: {件数}

## Critical（必須修正）
{修正必須の問題をリスト}

## Warning（推奨修正）
{推奨される改善をリスト}

## Info（改善提案）
{オプションの強化をリスト}

## 具体的な推奨事項
{例を含む具体的なアクションアイテム}
```

### ステップ5: インタラクティブな改善

レポート提示後：
1. ユーザーに修正を希望するか確認
2. Critical問題を優先的に修正
3. 段階的に修正を適用
4. 各修正後に再検証

## 重大度分類

### Critical
スキルの正常な機能を妨げる問題：
- SKILL.mdのボディが英語で書かれている
- descriptionが空または不足
- ボディが500行を大幅に超過
- スクリプトのセキュリティ脆弱性
- スクリプトのエラー処理不足
- SKILL.mdからリンクされた参照ファイルが存在しない（リンク切れ）
- SKILL.mdのワークフローで参照されるスクリプトが存在しない

### Warning
スキルの効果を低下させる問題：
- descriptionが英語で書かれている
- `disable-model-invocation: false` のスキルにトリガーワードがない
- Progressive Disclosureが適用されていない
- 例が不十分
- 用語が一貫していない
- ワークフローが不明確
- SKILL.md本文の記述と参照ファイルの実際の内容が矛盾している
- references/ やscripts/ に孤立ファイルがある（SKILL.mdからリンクされていない）
- `../` パスで別スキルの参照ファイルを直接参照している（symlink に移行すべき）
- 変更可能性のある内容（ワークフローのロジック、判定基準、出力テンプレート等）が2スキル以上で10行以上重複している。共通の参照ファイルに切り出して symlink で共有すべき

### Info
改善の機会：
- より簡潔にできる
- 構造の最適化
- 追加の例があると良い
- 複数スキル間で同一・類似ブロックが重複しているが、Warning閾値未満の場合（10行未満、または外部CLIの定型チェック等の安定した内容）。共通の参照ファイルに切り出して symlink で共有するとメンテナンス性が向上する

## レビューセッション例

ユーザー: 「pdf-processorスキルをレビューして」

```
1. 読み込み: skills/pdf-processor/SKILL.md
2. ロード: references/best-practices.md
3. チェックリストに照らして分析
4. 日本語でレポート生成
5. 修正を提案
```

**レポート出力例**:
```markdown
# スキルレビューレポート: pdf-processor

## サマリー
- 総合評価: NEEDS_IMPROVEMENT
- Critical: 0件
- Warning: 2件
- Info: 1件

## Warning（推奨修正）
1. descriptionにトリガーワードが不足（「PDFを処理」「PDF変換」等を追加）
2. Progressive Disclosureが未適用（変換オプション一覧を参照ファイルに分離すべき）

## Info（改善提案）
1. エラー時の出力例があるとベター

## 具体的な推奨事項
- descriptionに具体的なトリガーを追加: 「PDFファイルの変換、分割、結合を行います。...」
- `references/conversion-options.md` を作成し、変換オプション詳細を分離
```

**CRITICAL_ISSUESの出力例**:
```markdown
# スキルレビューレポート: data-exporter

## サマリー
- 総合評価: CRITICAL_ISSUES
- Critical: 2件
- Warning: 1件
- Info: 0件

## Critical（必須修正）
1. SKILL.mdのボディが英語で書かれている → 日本語に書き直す必要がある
2. SKILL.mdからリンクされた `references/export-formats.md` が存在しない（リンク切れ）

## Warning（推奨修正）
1. descriptionが英語で書かれている → 日本語に変更

## 具体的な推奨事項
- ボディ全体を日本語で書き直す
- `references/export-formats.md` を作成するか、リンクを削除する
- descriptionを日本語に変更: 「データをCSV/JSON/XML形式でエクスポートする。...」
```
