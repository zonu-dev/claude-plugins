# ルール化妥当性の5基準

## 判定基準

| # | 基準 | 判定方法 |
|---|------|----------|
| 1 | **非自明性** | コードを読めば推測できる規約ではないか |
| 2 | **違反影響度** | 違反時にアーキテクチャ崩壊・データ不整合・セキュリティ問題が起きるか |
| 3 | **判断分岐の頻度** | 開発中にその判断に直面する頻度が高いか |
| 4 | **自動検証の補完** | ESLint・型チェック等で検出できない規約か |
| 5 | **コンテキストコスト** | ルール追加によるコンテキスト消費に見合う価値があるか |

## 判定結果テンプレート

```markdown
## ルール化妥当性判定

| 基準 | 結果 | 根拠 |
|------|------|------|
| 非自明性 | ✓ / ✗ | {根拠} |
| 違反影響度 | ✓ / ✗ | {根拠} |
| 判断分岐頻度 | ✓ / ✗ | {根拠} |
| 自動検証補完 | ✓ / ✗ | {根拠} |
| コンテキストコスト | ✓ / ✗ | {根拠} |

→ 該当: N/5 → {判定}
```

## 判定アクション

| 該当数 | 判定 | アクション |
|--------|------|------------|
| 4〜5個 | **新規ルール作成** | 次のステップへ進む |
| 2〜3個 | **既存ルールへの追記** | 追記先を提案し、ユーザー確認後に追記して終了 |
| 0〜1個 | **ルール化不要** | 理由を説明して終了 |

- **2〜3個の場合**: 既存のどのルールファイルに追記すべきかを提案する。ユーザーが承認したら追記し、review-rule でレビューして終了。
- **0〜1個の場合**: ルール化が不要な理由を明確に説明して終了。ユーザーが強くルール化を希望する場合のみ続行。

## ルールファイルテンプレート

### パス指定の場合

```markdown
---
paths:
  - {パスパターン1}
  - {パスパターン2}
---

# {ルールのタイトル}

## {セクション1}

- {具体的でアクショナブルな指示}
- {具体的でアクショナブルな指示}

## {セクション2}

- {具体的でアクショナブルな指示}
```

### 常時適用の場合

```markdown
# {ルールのタイトル}

## {セクション1}

- {具体的でアクショナブルな指示}
```
