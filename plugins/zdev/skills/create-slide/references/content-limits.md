# コンテンツ量制約（1 枚あたり）

create-slide と review-slide で共有する制約値。

## 通常レイアウト（1カラム）

1 枚のスライドに収まる目安（default テーマ、16:9）。

| 要素 | 作成時上限 | 判定上限 |
|------|-----------|---------|
| コードブロック | 最大 10 行 | 最大 12 行 |
| テーブル | ヘッダー含め最大 6 行 | ヘッダー含め最大 7 行 |
| 箇条書き | 最大 6 項目 | 最大 7 項目 |
| 番号付きリスト | 最大 5 項目 | 最大 6 項目 |
| 見出し + コード + テキスト | 見出し 1 + コード 8 行 + テキスト 1-2 行 | 見出し 1 + コード 8 行 + テキスト 2 行 |
| 見出し + テーブル + テキスト | 見出し 1 + テーブル 5 行 + テキスト 1-2 行 | 見出し 1 + テーブル 5 行 + テキスト 2 行 |
| 見出し + コード + テーブル + ▶ | コード 7 行 + テーブル 4 行 + ▶ 1 行 | コード 8 行 + テーブル 4 行 + ▶ 1 行 |
| 見出し + SVG 画像 + テキスト | 見出し 1 + 画像 1 枚 + テキスト 1-2 行 | 見出し 1 + 画像 `--diagram-width: 500px`〜`800px` + テキスト 1-2 行 |

- **作成時上限**: create-slide で使用。バッファを含めた保守的な値
- **判定上限**: review-slide で使用。これを超えたら NG と判定

## ヘッダー使用時の補正

`header:` を設定すると左上にテキストが常時表示される。tech-scrapbook テーマは `padding: 72px 60px 40px` と `section h2 { margin-top: 0.4em }` でヘッダーと見出しの間に十分な余白を確保している。

コンテンツ量が非常に多い場合は flex の垂直中央揃えにより見出しが上に押し上げられることがあるため、`header:` 使用時は上記の上限から **0-1 行分を差し引く**。

| パターン | header なし上限 | header あり上限 |
|---------|--------------|--------------|
| コード + テーブル + ▶ | コード 7 行 + テーブル 4 行 + ▶ | コード 7 行 + テーブル 4 行 + ▶ |
| コードのみ | 最大 10 行 | 最大 9 行 |
| テーブルのみ | 最大 6 行 | 最大 6 行 |
| コード + テキスト | コード 8 行 + テキスト 2 行 | コード 8 行 + テキスト 1 行 |

**判定方法**: PNG でヘッダーと見出しが重なっていないこと。余白が狭くても重なりがなければ OK。

**⚠ spacer div（`<div style="padding-top: ...">` 等）でヘッダーと見出しの間隔を広げてはならない。** spacer はコンテンツ領域を圧迫し、下部のテーブルやコードがはみ出す原因になる。

## フットノート使用時の補正

`<div class="footnotes">` は `position: absolute` でスライド下部に固定されるため、メインコンテンツと**重なる**。フットノートを使う場合は上記の上限から以下を差し引く。

| フットノート件数 | 差し引き行数（作成時） | 差し引き行数（判定時） |
|----------------|---------------------|---------------------|
| 1 件 | 1 行 | 1 行 |
| 2 件 | 2 行 | 1-2 行 |
| 3 件（上限） | 3 行 | 2-3 行 |

**4 件以上のフットノートは禁止。** 括弧でのインライン化（例: `Axios（JS/TS の HTTP クライアント）`）またはスライド分割で対応する。

## グリッド／マルチカラムレイアウト

`display: grid` 等で複数カラムに分割する場合、見出し + gap で上部スペースを消費するため各カラムの許容量は通常より**少なくなる**。

| 要素 | 上限（各カラム内） |
|------|---------|
| テーブル | ヘッダー含め最大 5 行 |
| 箇条書き / 番号付きリスト | 最大 5 項目 |
| 項目が 6 以上ある場合 | グループ化して行数を減らす（例: 8 項目 → 4 行に 2 つずつまとめる） |

**内容が多い場合は複数スライドに分割する。1 枚に詰め込まない。**
**番号付きリストよりテーブル（`font-size: 0.78em` 適用でコンパクト）を優先する。**

## 折り返し孤立文字（widow/orphan）の防止

見出し（`##`）や要点行（`▶`）が折り返して **2 行目に 1〜4 文字だけ残る** と見た目が悪い。1280×720（16:9）では以下を目安にする。

| 要素 | 作成時上限 | 判定上限 |
|------|-----------|---------|
| `## 見出し` | 全角 28 文字 / 半角 56 文字 | 全角 30 文字 / 半角 60 文字 |
| `▶ 要点` 行 | 全角 38 文字 / 半角 76 文字 | 全角 40 文字 / 半角 80 文字 |

**文字数は全角 1 = 半角 2 で換算する。** 半角英数・記号が混在する場合は合算で判定。

### 修正パターン

| 状態 | 対処 |
|------|------|
| 2 行目に 1〜4 文字残る | 表現を短縮して 1 行に収める |
| 短縮が難しい | 句読点や助詞の位置で意味的に自然な折り返しになるよう語順を調整する |
| 見出しが長すぎて短縮不可 | 修飾語（「〜のための」「〜による」等）を削って主語＋動詞に圧縮する |
