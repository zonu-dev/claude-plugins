# デザインパターンとレイアウト規約

スライド作成時に参照するレイアウトパターンと余白・コントラストの規約。

## メッセージ設計規約

### 1 スライド = 1 メッセージ

- 1 枚で伝える主張は 1 つに絞る
- 見出しは主張を文章として表す
- 本文は「根拠 1-3 個 + 補足 1 行」に収める

### 見出し品質チェック

| 判定 | 例 | 理由 |
|---|---|---|
| NG | `概要` | 何を説明するか不明 |
| NG | `詳細` | 主張が存在しない |
| NG | `比較` | 比較対象と結論が不明 |
| OK | `Jest は単体テストの実行時間を短縮しやすい` | 主張が明確 |
| OK | `rebase は履歴を直線化し、レビュー負荷を下げる` | 効果まで示せている |
| OK | `キャッシュ導入で API 応答の平均待ち時間を削減できる` | 条件と効果が明確 |

### So What 行の設計

本文末尾に 1 行で「なぜ重要か」を置く。

- 形式: `▶ <このスライドの要点を 1 文で>`
- 例: `▶ 依存逆転を CI で自動検出し、アーキテクチャ境界を守る。`
- テキストプレフィックス（「つまり」「要するに」等）は使わない — 多用すると単調になる
- `▶` は視覚的に目を引きつつ、コンテンツ内の矢印 `→` と混同しない

## スライドリズム（ペーシング）

認知負荷を管理するため、情報密度の **緩急** を意識して配置する。

### 密度の分類

| 密度 | スライドの特徴 | 例 |
|------|--------------|-----|
| **重い** | コードブロック、テーブル、詳細な数値比較 | 実装例、比較表、設定ファイル |
| **中くらい** | 箇条書き + 補足、グリッドレイアウト | 特徴リスト、2 カラム比較 |
| **軽い** | 図のみ、キーテイクアウェイ 1 行、lead | 全体像、まとめ、章区切り |

### ペーシングルール

1. **重いスライドを 2 枚連続させない** — 間に中〜軽のスライドを挟む
2. **3 枚連続で同密度にしない** — 単調さを避ける
3. **章の切れ目に軽いスライドを置く** — 話題転換を視覚的に示す
4. **コード→図→テイクアウェイ** の流れを基本リズムとする

### 呼吸スライドの挿入タイミング

「呼吸スライド」= 軽い密度のスライド（図 1 枚、キーメッセージ 1 行、章タイトルなど）

- 重いスライドの **直後** に 1 枚
- 新しい章・トピックの **冒頭** に 1 枚
- 発表全体の **中間地点**（折り返し）に 1 枚

### NG / OK パターン

```
NG: コード → コード → テーブル → コード（重が連続）
OK: コード → 図（全体像） → テーブル → キーテイクアウェイ → コード
```

## レイアウトパターン

### 1. シングルカラム（標準）

最も基本的なレイアウト。見出し + 1 種類のコンテンツ。

```
┌─────────────────────────────┐
│ ## 見出し                    │
│                              │
│ コード / テーブル / リスト    │
│                              │
│                              │
│                         1/30 │
└─────────────────────────────┘
```

### 2. 見出し + コンテンツ + 補足テキスト

見出しの下にメインコンテンツ、その下に 1-2 行の補足。

```
┌─────────────────────────────┐
│ ## 見出し                    │
│                              │
│ コードブロック (8行以内)      │
│                              │
│ 補足テキスト 1-2 行          │
│                         1/30 │
└─────────────────────────────┘
```

### 3. 2カラムグリッド

比較・対照に適したレイアウト。`display: grid` を使用。

```
┌─────────────────────────────┐
│ ## 見出し                    │
│ ┌────────┐  ┌────────┐      │
│ │ 左カラム │  │ 右カラム │      │
│ │ 5行以内 │  │ 5行以内 │      │
│ └────────┘  └────────┘      │
│                         1/30 │
└─────────────────────────────┘
```

### 4. 画像 + テキスト

SVG 図や画像をメインに配置。用途に応じて 2 つのバリエーションがある。

#### 4a. 概観図（呼吸スライド / 章区切り）

全体像を一目で把握させる目的。`▶` 1 行で十分。

```
┌─────────────────────────────┐
│ ## 見出し                    │
│                              │
│   diagram-theme-switch 画像   │
│                              │
│ ▶ 要点 1 行                 │
│                         1/30 │
└─────────────────────────────┘
```

適用条件: 後続スライドで図の各要素を個別に解説する場合のみ。

#### 4b. 解説図（コンテンツスライド）

図が示す概念をそのスライド内で理解させる目的。**図だけでは不十分 — 図の要素を補足するテーブルまたは箇条書きを必ず添える。**

```
┌─────────────────────────────┐
│ ## 見出し                    │
│                              │
│ テーブル / 箇条書き（3-5行）  │
│                              │
│ ▶ 要点 1 行                 │
│                         1/30 │
└─────────────────────────────┘
```

図を使わず、テーブル + 箇条書きで十分伝わる場合は図を省略してよい。図が大きく補足テキストと共存できない場合は、図スライド（4a）+ 解説スライドの 2 枚に分割する。

#### 図スライドの判定フロー

```
この図は後続スライドで要素を個別解説する？
  → Yes: 4a（概観図）を使う — ▶ 1 行で OK
  → No:  4b（解説図）を使う — テーブル or 箇条書きを必須で添える
```

#### Mermaid SVG の埋め込み

Mermaid 由来の SVG は以下を使う:

```html
<div class="diagram-theme-switch" style="--diagram-width: 800px;">
  <img class="diagram-default" src="<images-relative>/<図名>.svg" alt="">
  <img class="diagram-midnight" src="<images-relative>/<図名>-midnight.svg" alt="">
</div>
```

### 5. コンテンツ + フットノート

専門用語の補足をスライド下部に配置。`.footnotes` は `position: absolute` でページ番号の直上に固定される。

```
┌─────────────────────────────┐
│ ## 見出し                    │
│                              │
│ コード / テーブル / リスト    │
│ (通常より 2 行分少なく)       │
│                              │
│ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ │ ← border-top
│ ※1 用語: 説明               │ ← footnotes (0.48em)
│                         1/30 │
└─────────────────────────────┘
```

- テキスト中に `<sup>※1</sup>` でマーカーを置く
- フットノートは **最大 3 件**（3 行）。それ以上はスライド分割
- メインコンテンツの上限を **フットノート 1 件につき約 1 行分** 差し引く（3 件で 2-3 行分）

### 6. lead スライド（タイトル / まとめ）

中央揃え。`<!-- _class: lead -->` を使用。

```
┌─────────────────────────────┐
│                              │
│         # タイトル           │
│         サブタイトル          │
│                              │
│                              │
└─────────────────────────────┘
```

## 余白規約

| 位置 | 最低余白 | 備考 |
|------|---------|------|
| 上端（ヘッダー下） | 10px | ヘッダーとコンテンツが重ならない |
| 下端（ページ番号上） | スライド高さの 10% | ページ番号と重ならない |
| 左右 | 60px | テーマの padding で確保済み |
| 要素間 | 0.3em 以上 | CSS で設定済み |

## コントラスト規約（WCAG 2.1 AA）

| 要素 | 最低コントラスト比 |
|------|------------------|
| 本文テキスト vs 背景 | 4.5:1 |
| 見出し vs 背景 | 3:1（大文字） |
| インラインコード vs コード背景 | 4.5:1 |
| lead スライドのテキスト vs 背景 | 4.5:1 |

## 視覚要素の活用ガイド

タイトルスライドとまとめスライドを除き、**各スライドに最低 1 つの視覚要素**を含める:

- コードブロック
- テーブル
- Mermaid 図（SVG）
- 画像
- グリッドレイアウト

テキストのみのスライドは聴衆の集中力を下げるため避ける。
